!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Fledit=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){d.BASE="http://"+d.HOST+"/api/files";var b=new g.EventEmitter,c=this;return f(c,b),a&&c.load(a),c}var e=a("superagent"),f=a("node.extend"),g=a("events");d.HOST="www.fledit.io",d.create=function(a){var b=new d;return b.create(a)},d.prototype.create=function(a){var b=this;return e.post(d.BASE,{content:a}).end(function(a,c){c&&c.ok?(f(b,c.body),b.emit("complete",b)):b.emit("error",a)}),b},d.load=function(a){return new d(a)},d.prototype.load=function(a){var b=this;return e.get(d.BASE+"/"+a).end(function(a,c){c&&c.ok?(f(b,c.body),b.emit("complete",b)):b.emit("error",a)}),b},d.prototype.save=function(){var a=this;return e.put(a.raw(),a).end(function(b,c){c&&c.ok?(f(a,c.body),a.emit("updated",a)):a.emit("error",b)}),a},d.prototype.del=function(){var a=this;return e.del(a.raw(!0)).end(function(b,c){c&&c.ok?a.emit("deleted",a):a.emit("error",b)}),a},d.prototype.link=function(){return"http://"+d.HOST+"/#!/file/"+this._id},d.prototype.raw=function(a){return d.BASE+"/"+this._id+(a?"?secret="+this.secret:"")},d.prototype.admin=function(){return this.secret?this.link()+"?secret="+this.secret:null},b.exports=d},{events:2,"node.extend":3,superagent:6}],2:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],3:[function(a,b,c){b.exports=a("./lib/extend")},{"./lib/extend":4}],4:[function(a,b,c){function d(){var a,b,c,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[1]||{},j=2),"object"==typeof i||e.fn(i)||(i={});k>j;j++)if(a=arguments[j],null!=a){"string"==typeof a&&(a=a.split(""));for(b in a)c=i[b],f=a[b],i!==f&&(l&&f&&(e.hash(f)||(g=e.array(f)))?(g?(g=!1,h=c&&e.array(c)?c:[]):h=c&&e.hash(c)?c:{},i[b]=d(l,h,f)):"undefined"!=typeof f&&(i[b]=f))}return i}var e=a("is");d.version="1.1.3",b.exports=d},{is:5}],5:[function(a,b,c){var d,e=Object.prototype,f=e.hasOwnProperty,g=e.toString;"function"==typeof Symbol&&(d=Symbol.prototype.valueOf);var h=function(a){return a!==a},i={"boolean":1,number:1,string:1,undefined:1},j=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,k=/^[A-Fa-f0-9]+$/,l=b.exports={};l.a=l.type=function(a,b){return typeof a===b},l.defined=function(a){return"undefined"!=typeof a},l.empty=function(a){var b,c=g.call(a);if("[object Array]"===c||"[object Arguments]"===c||"[object String]"===c)return 0===a.length;if("[object Object]"===c){for(b in a)if(f.call(a,b))return!1;return!0}return!a},l.equal=function(a,b){var c=a===b;if(c)return!0;var d,e=g.call(a);if(e!==g.call(b))return!1;if("[object Object]"===e){for(d in a)if(!(l.equal(a[d],b[d])&&d in b))return!1;for(d in b)if(!(l.equal(a[d],b[d])&&d in a))return!1;return!0}if("[object Array]"===e){if(d=a.length,d!==b.length)return!1;for(;--d;)if(!l.equal(a[d],b[d]))return!1;return!0}return"[object Function]"===e?a.prototype===b.prototype:"[object Date]"===e?a.getTime()===b.getTime():c},l.hosted=function(a,b){var c=typeof b[a];return"object"===c?!!b[a]:!i[c]},l.instance=l["instanceof"]=function(a,b){return a instanceof b},l.nil=l["null"]=function(a){return null===a},l.undef=l.undefined=function(a){return"undefined"==typeof a},l.args=l.arguments=function(a){var b="[object Arguments]"===g.call(a),c=!l.array(a)&&l.arraylike(a)&&l.object(a)&&l.fn(a.callee);return b||c},l.array=function(a){return"[object Array]"===g.call(a)},l.args.empty=function(a){return l.args(a)&&0===a.length},l.array.empty=function(a){return l.array(a)&&0===a.length},l.arraylike=function(a){return!!a&&!l["boolean"](a)&&f.call(a,"length")&&isFinite(a.length)&&l.number(a.length)&&a.length>=0},l["boolean"]=function(a){return"[object Boolean]"===g.call(a)},l["false"]=function(a){return l["boolean"](a)&&Boolean(Number(a))===!1},l["true"]=function(a){return l["boolean"](a)&&Boolean(Number(a))===!0},l.date=function(a){return"[object Date]"===g.call(a)},l.element=function(a){return void 0!==a&&"undefined"!=typeof HTMLElement&&a instanceof HTMLElement&&1===a.nodeType},l.error=function(a){return"[object Error]"===g.call(a)},l.fn=l["function"]=function(a){var b="undefined"!=typeof window&&a===window.alert;return b||"[object Function]"===g.call(a)},l.number=function(a){return"[object Number]"===g.call(a)},l.infinite=function(a){return a===1/0||a===-(1/0)},l.decimal=function(a){return l.number(a)&&!h(a)&&!l.infinite(a)&&a%1!==0},l.divisibleBy=function(a,b){var c=l.infinite(a),d=l.infinite(b),e=l.number(a)&&!h(a)&&l.number(b)&&!h(b)&&0!==b;return c||d||e&&a%b===0},l["int"]=function(a){return l.number(a)&&!h(a)&&a%1===0},l.maximum=function(a,b){if(h(a))throw new TypeError("NaN is not a valid value");if(!l.arraylike(b))throw new TypeError("second argument must be array-like");for(var c=b.length;--c>=0;)if(a<b[c])return!1;return!0},l.minimum=function(a,b){if(h(a))throw new TypeError("NaN is not a valid value");if(!l.arraylike(b))throw new TypeError("second argument must be array-like");for(var c=b.length;--c>=0;)if(a>b[c])return!1;return!0},l.nan=function(a){return!l.number(a)||a!==a},l.even=function(a){return l.infinite(a)||l.number(a)&&a===a&&a%2===0},l.odd=function(a){return l.infinite(a)||l.number(a)&&a===a&&a%2!==0},l.ge=function(a,b){if(h(a)||h(b))throw new TypeError("NaN is not a valid value");return!l.infinite(a)&&!l.infinite(b)&&a>=b},l.gt=function(a,b){if(h(a)||h(b))throw new TypeError("NaN is not a valid value");return!l.infinite(a)&&!l.infinite(b)&&a>b},l.le=function(a,b){if(h(a)||h(b))throw new TypeError("NaN is not a valid value");return!l.infinite(a)&&!l.infinite(b)&&b>=a},l.lt=function(a,b){if(h(a)||h(b))throw new TypeError("NaN is not a valid value");return!l.infinite(a)&&!l.infinite(b)&&b>a},l.within=function(a,b,c){if(h(a)||h(b)||h(c))throw new TypeError("NaN is not a valid value");if(!l.number(a)||!l.number(b)||!l.number(c))throw new TypeError("all arguments must be numbers");var d=l.infinite(a)||l.infinite(b)||l.infinite(c);return d||a>=b&&c>=a},l.object=function(a){return"[object Object]"===g.call(a)},l.hash=function(a){return l.object(a)&&a.constructor===Object&&!a.nodeType&&!a.setInterval},l.regexp=function(a){return"[object RegExp]"===g.call(a)},l.string=function(a){return"[object String]"===g.call(a)},l.base64=function(a){return l.string(a)&&(!a.length||j.test(a))},l.hex=function(a){return l.string(a)&&(!a.length||k.test(a))},l.symbol=function(a){return"function"==typeof Symbol&&"[object Symbol]"===g.call(a)&&"symbol"==typeof d.call(a)}},{}],6:[function(a,b,c){function d(){}function e(a){var b={}.toString.call(a);switch(b){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function f(a){return a===Object(a)}function g(a){if(!f(a))return a;var b=[];for(var c in a)null!=a[c]&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}function h(a){for(var b,c,d={},e=a.split("&"),f=0,g=e.length;g>f;++f)c=e[f],b=c.split("="),d[decodeURIComponent(b[0])]=decodeURIComponent(b[1]);return d}function i(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;i>h;++h)c=f[h],b=c.indexOf(":"),d=c.slice(0,b).toLowerCase(),e=r(c.slice(b+1)),g[d]=e;return g}function j(a){return a.split(/ *; */).shift()}function k(a){return p(a.split(/ *; */),function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})}function l(a,b){b=b||{},this.req=a,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=i(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function m(a,b){var c=this;o.call(this),this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var a=null,b=null;try{b=new l(c)}catch(d){return a=new Error("Parser is unable to parse the response"),a.parse=!0,a.original=d,c.callback(a)}if(c.emit("response",b),a)return c.callback(a,b);if(b.status>=200&&b.status<300)return c.callback(a,b);var e=new Error(b.statusText||"Unsuccessful HTTP response");e.original=a,e.response=b,e.status=b.status,c.callback(e,b)})}function n(a,b){return"function"==typeof b?new m("GET",a).end(b):1==arguments.length?new m("GET",a):new m(a,b)}var o=a("emitter"),p=a("reduce"),q="undefined"==typeof window?this||self:window;n.getXHR=function(){if(!(!q.XMLHttpRequest||q.location&&"file:"==q.location.protocol&&q.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}return!1};var r="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};n.serializeObject=g,n.parseString=h,n.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},n.serialize={"application/x-www-form-urlencoded":g,"application/json":JSON.stringify},n.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},l.prototype.get=function(a){return this.header[a.toLowerCase()]},l.prototype.setHeaderProperties=function(a){var b=this.header["content-type"]||"";this.type=j(b);var c=k(b);for(var d in c)this[d]=c[d]},l.prototype.parseBody=function(a){var b=n.parse[this.type];return b&&a&&(a.length||a instanceof Object)?b(a):null},l.prototype.setStatusProperties=function(a){1223===a&&(a=204);var b=a/100|0;this.status=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.clientError=4==b,this.serverError=5==b,this.error=4==b||5==b?this.toError():!1,this.accepted=202==a,this.noContent=204==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.notFound=404==a,this.forbidden=403==a},l.prototype.toError=function(){var a=this.req,b=a.method,c=a.url,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.url=c,e},n.Response=l,o(m.prototype),m.prototype.use=function(a){return a(this),this},m.prototype.timeout=function(a){return this._timeout=a,this},m.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},m.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},m.prototype.set=function(a,b){if(f(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},m.prototype.unset=function(a){return delete this._header[a.toLowerCase()],delete this.header[a],this},m.prototype.getHeader=function(a){return this._header[a.toLowerCase()]},m.prototype.type=function(a){return this.set("Content-Type",n.types[a]||a),this},m.prototype.accept=function(a){return this.set("Accept",n.types[a]||a),this},m.prototype.auth=function(a,b){var c=btoa(a+":"+b);return this.set("Authorization","Basic "+c),this},m.prototype.query=function(a){return"string"!=typeof a&&(a=g(a)),a&&this._query.push(a),this},m.prototype.field=function(a,b){return this._formData||(this._formData=new q.FormData),this._formData.append(a,b),this},m.prototype.attach=function(a,b,c){return this._formData||(this._formData=new q.FormData),this._formData.append(a,b,c),this},m.prototype.send=function(a){var b=f(a),c=this.getHeader("Content-Type");if(b&&f(this._data))for(var d in a)this._data[d]=a[d];else"string"==typeof a?(c||this.type("form"),c=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==c?this._data=this._data?this._data+"&"+a:a:this._data=(this._data||"")+a):this._data=a;return!b||e(a)?this:(c||this.type("json"),this)},m.prototype.callback=function(a,b){var c=this._callback;this.clearTimeout(),c(a,b)},m.prototype.crossDomainError=function(){var a=new Error("Origin is not allowed by Access-Control-Allow-Origin");a.crossDomain=!0,this.callback(a)},m.prototype.timeoutError=function(){var a=this._timeout,b=new Error("timeout of "+a+"ms exceeded");b.timeout=a,this.callback(b)},m.prototype.withCredentials=function(){return this._withCredentials=!0,this},m.prototype.end=function(a){var b=this,c=this.xhr=n.getXHR(),f=this._query.join("&"),g=this._timeout,h=this._formData||this._data;this._callback=a||d,c.onreadystatechange=function(){if(4==c.readyState){var a;try{a=c.status}catch(d){a=0}if(0==a){if(b.timedout)return b.timeoutError();if(b.aborted)return;return b.crossDomainError()}b.emit("end")}};var i=function(a){a.total>0&&(a.percent=a.loaded/a.total*100),b.emit("progress",a)};this.hasListeners("progress")&&(c.onprogress=i);try{c.upload&&this.hasListeners("progress")&&(c.upload.onprogress=i)}catch(j){}if(g&&!this._timer&&(this._timer=setTimeout(function(){b.timedout=!0,b.abort()},g)),f&&(f=n.serializeObject(f),this.url+=~this.url.indexOf("?")?"&"+f:"?"+f),c.open(this.method,this.url,!0),this._withCredentials&&(c.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof h&&!e(h)){var k=this.getHeader("Content-Type"),l=n.serialize[k?k.split(";")[0]:""];l&&(h=l(h))}for(var m in this.header)null!=this.header[m]&&c.setRequestHeader(m,this.header[m]);return this.emit("request",this),c.send(h),this},m.prototype.then=function(a,b){return this.end(function(c,d){c?b(c):a(d)})},n.Request=m,n.get=function(a,b,c){var d=n("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},n.head=function(a,b,c){var d=n("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.del=function(a,b){var c=n("DELETE",a);return b&&c.end(b),c},n.patch=function(a,b,c){var d=n("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.post=function(a,b,c){var d=n("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.put=function(a,b,c){var d=n("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},b.exports=n},{emitter:7,reduce:8}],7:[function(a,b,c){function d(a){return a?e(a):void 0}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],8:[function(a,b,c){b.exports=function(a,b,c){for(var d=0,e=a.length,f=3==arguments.length?c:a[d++];e>d;)f=b.call(null,f,a[d],++d,a);return f}},{}]},{},[1])(1)});